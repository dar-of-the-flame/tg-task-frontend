<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow üöÄ</title>
    <meta name="description" content="–£–º–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á –¥–ª—è Telegram">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="manifest" href="manifest.json">
</head>
<body class="dark-theme">
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-rocket"></i>
                    <h1>TaskFlow</h1>
                </div>
                <p class="subtitle" id="current-date">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
            <div class="header-right">
                <button class="btn-icon" id="theme-toggle" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn-icon" id="filter-btn" title="–§–∏–ª—å—Ç—Ä—ã">
                    <i class="fas fa-filter"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Tasks Section -->
            <div class="tasks-section" id="tasks-section">
                <div class="section-header">
                    <h2><i class="fas fa-tasks"></i> –ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                    <div class="tasks-stats">
                        <span class="stat-badge">
                            <i class="fas fa-circle"></i>
                            <span id="active-tasks">0</span> –∞–∫—Ç–∏–≤–Ω—ã—Ö
                        </span>
                        <span class="stat-badge completed">
                            <i class="fas fa-check-circle"></i>
                            <span id="completed-tasks">0</span> –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
                        </span>
                    </div>
                </div>
                
                <div class="tasks-list" id="tasks-list">
                    <!-- Tasks will be loaded here -->
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <h3>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á</h3>
                        <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É, –Ω–∞–∂–∞–≤ –Ω–∞ –ø–ª—é—Å–∏–∫</p>
                    </div>
                </div>

                <!-- Archived Tasks (collapsible) -->
                <div class="archived-section">
                    <button class="archived-toggle" id="archived-toggle">
                        <i class="fas fa-archive"></i>
                        <span>–ê—Ä—Ö–∏–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="archived-list" id="archived-list">
                        <!-- Archived tasks will appear here -->
                    </div>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="stats-section" id="stats-section" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <button class="btn-small" id="refresh-stats">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-tasks-stat">0</h3>
                            <p>–í—Å–µ–≥–æ –∑–∞–¥–∞—á</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="completion-rate">0%</h3>
                            <p>–í—ã–ø–æ–ª–Ω–µ–Ω–æ</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="productivity-score">0</h3>
                            <p>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="streak-days">0</h3>
                            <p>–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                        </div>
                    </div>
                </div>

                <div class="charts-container">
                    <div class="chart">
                        <h4><i class="fas fa-chart-pie"></i> –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h4>
                        <div class="chart-placeholder" id="category-chart">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                    <div class="chart">
                        <h4><i class="fas fa-chart-bar"></i> –ü–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏</h4>
                        <div class="chart-placeholder" id="weekday-chart">
                            <canvas id="weekdayChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-page="tasks">
                <i class="fas fa-tasks"></i>
                <span>–ó–∞–¥–∞—á–∏</span>
            </button>
            <div class="add-task-wrapper">
                <button class="add-task-btn" id="add-task-btn">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <button class="nav-btn" data-page="stats">
                <i class="fas fa-chart-line"></i>
                <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
            </button>
        </nav>
    </div>

    <!-- Task Modal -->
    <div class="modal" id="task-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-plus-circle"></i> –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
                <button class="close-modal">&times;</button>
            </div>
            
            <form id="task-form">
                <!-- Quick Actions -->
                <div class="quick-actions-modal">
                    <button type="button" class="quick-action-btn" data-type="quick">
                        <i class="fas fa-bolt"></i>
                        <span>–ë—ã—Å—Ç—Ä–∞—è</span>
                    </button>
                    <button type="button" class="quick-action-btn" data-type="note">
                        <i class="fas fa-sticky-note"></i>
                        <span>–ó–∞–º–µ—Ç–∫–∞</span>
                    </button>
                    <button type="button" class="quick-action-btn active" data-type="task">
                        <i class="fas fa-tasks"></i>
                        <span>–ó–∞–¥–∞—á–∞</span>
                    </button>
                </div>

                <!-- Category Selection -->
                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                    <div class="category-selector">
                        <div class="category-option" data-category="work" data-emoji="üíº">
                            <i class="fas fa-briefcase"></i>
                            <span>–†–∞–±–æ—Ç–∞</span>
                        </div>
                        <div class="category-option active" data-category="personal" data-emoji="üë§">
                            <i class="fas fa-user"></i>
                            <span>–õ–∏—á–Ω–æ–µ</span>
                        </div>
                        <div class="category-option" data-category="health" data-emoji="‚ù§Ô∏è">
                            <i class="fas fa-heart"></i>
                            <span>–ó–¥–æ—Ä–æ–≤—å–µ</span>
                        </div>
                        <div class="category-option" data-category="study" data-emoji="üìö">
                            <i class="fas fa-graduation-cap"></i>
                            <span>–£—á—ë–±–∞</span>
                        </div>
                    </div>
                    <input type="hidden" id="selected-category" value="personal">
                    <input type="hidden" id="selected-emoji" value="üë§">
                </div>

                <!-- Task Text -->
                <div class="form-group">
                    <label for="task-text">–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?</label>
                    <textarea 
                        id="task-text" 
                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–¥–µ–ª–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É, –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≥–ª–∞–≤—É –∫–Ω–∏–≥–∏..." 
                        rows="3"
                        required></textarea>
                </div>

                <!-- Date Input -->
                <div class="form-group">
                    <label for="task-date">–ö–æ–≥–¥–∞?</label>
                    <div class="date-input-wrapper">
                        <select id="task-date-type">
                            <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                            <option value="tomorrow">–ó–∞–≤—Ç—Ä–∞</option>
                            <option value="specific">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É</option>
                        </select>
                        <input type="date" id="task-date" style="display: none;">
                    </div>
                </div>

                <!-- Time Input -->
                <div class="form-group">
                    <label for="task-time">–í–æ —Å–∫–æ–ª—å–∫–æ? (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <div class="time-input-wrapper">
                        <input type="number" id="task-hours" min="0" max="23" placeholder="00" value="">
                        <span>:</span>
                        <input type="number" id="task-minutes" min="0" max="59" placeholder="00" value="">
                        <button type="button" class="time-now-btn" id="time-now-btn">
                            <i class="fas fa-clock"></i> –°–µ–π—á–∞—Å
                        </button>
                    </div>
                </div>

                <!-- Priority -->
                <div class="form-group">
                    <label>–í–∞–∂–Ω–æ—Å—Ç—å:</label>
                    <div class="priority-selector">
                        <div class="priority-option" data-priority="low">
                            <i class="fas fa-arrow-down"></i>
                            <span>–ù–∏–∑–∫–∞—è</span>
                        </div>
                        <div class="priority-option active" data-priority="normal">
                            <i class="fas fa-minus"></i>
                            <span>–û–±—ã—á–Ω–∞—è</span>
                        </div>
                        <div class="priority-option" data-priority="high">
                            <i class="fas fa-arrow-up"></i>
                            <span>–í—ã—Å–æ–∫–∞—è</span>
                        </div>
                    </div>
                    <input type="hidden" id="selected-priority" value="normal">
                </div>

                <!-- Buttons -->
                <div class="form-buttons">
                    <button type="button" class="btn btn-secondary close-modal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary" id="submit-btn">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quick Actions Menu (from plus button) -->
    <div class="quick-actions-menu" id="quick-actions-menu">
        <div class="quick-actions-content">
            <button class="quick-action-item" data-action="quick-task">
                <div class="action-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <div class="action-text">
                    <h4>–ë—ã—Å—Ç—Ä–∞—è –∑–∞–¥–∞—á–∞</h4>
                    <p>–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏</p>
                </div>
            </button>
            <button class="quick-action-item" data-action="add-note">
                <div class="action-icon">
                    <i class="fas fa-sticky-note"></i>
                </div>
                <div class="action-text">
                    <h4>–ó–∞–º–µ—Ç–∫–∞</h4>
                    <p>–¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç, –±–µ–∑ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π</p>
                </div>
            </button>
            <button class="quick-action-item" data-action="add-reminder">
                <div class="action-icon">
                    <i class="fas fa-bell"></i>
                </div>
                <div class="action-text">
                    <h4>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</h4>
                    <p>–° —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏</p>
                </div>
            </button>
        </div>
    </div>

    <!-- Filter Modal -->
    <div class="modal" id="filter-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-filter"></i> –§–∏–ª—å—Ç—Ä—ã</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="filter-options">
                <button class="filter-option active" data-filter="all">
                    <i class="fas fa-list"></i> –í—Å–µ –∑–∞–¥–∞—á–∏
                </button>
                <button class="filter-option" data-filter="today">
                    <i class="fas fa-sun"></i> –°–µ–≥–æ–¥–Ω—è
                </button>
                <button class="filter-option" data-filter="tomorrow">
                    <i class="fas fa-calendar-day"></i> –ó–∞–≤—Ç—Ä–∞
                </button>
                <button class="filter-option" data-filter="week">
                    <i class="fas fa-calendar-week"></i> –≠—Ç–∞ –Ω–µ–¥–µ–ª—è
                </button>
                <button class="filter-option" data-filter="no-date">
                    <i class="fas fa-calendar-times"></i> –ë–µ–∑ –¥–∞—Ç—ã
                </button>
                <button class="filter-option" data-filter="high">
                    <i class="fas fa-exclamation"></i> –í—ã—Å–æ–∫–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div class="toast" id="success-toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!</span>
    </div>

    <!-- Error Toast -->
    <div class="toast error" id="error-toast">
        <i class="fas fa-exclamation-circle"></i>
        <span id="error-message">–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏</span>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</p>
    </div>

    <!-- Charts.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>
